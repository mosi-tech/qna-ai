[
  {
    "id": "triangle-pattern-breakouts",
    "name": "Triangle Pattern Breakout Scanner",
    "file": "experimental/TrianglePatternBreakouts.json",
    "output": "/experimental/TrianglePatternBreakouts.json",
    "question": "Which stocks are breaking out of triangle consolidation patterns?",
    "retailQuestion": "Which stocks finished consolidating and are ready to move?",
    "description": "Identifies ascending, descending, and symmetrical triangle patterns approaching breakout points. Analyzes pattern duration, volume contraction during formation, and breakout quality with volume expansion to distinguish authentic breakouts from false moves.",
    "apis": [
      "marketdata:/v1beta1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/bars",
      "marketdata:/v2/stocks/snapshots"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get active stocks for triangle pattern identification",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch",
        "description": "Step 2: Get historical price data for triangle pattern construction and breakout analysis",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "fetch",
        "description": "Step 3: Get current market data for real-time breakout confirmation",
        "function": "alpaca-market_stocks-snapshots"
      },
      {
        "type": "engine",
        "description": "Step 4: Identify triangle patterns and analyze breakout probability with volume validation",
        "function": "detect_triangle_breakouts"
      },
      {
        "type": "compute",
        "description": "Step 5: Rank triangle breakouts by pattern quality and continuation potential",
        "function": "client_compute"
      }
    ],
    "followUp": [
      "Should I buy these triangle breakouts?",
      "How often do these patterns work?",
      "What's the risk if the breakout fails?",
      "How long should I hold after a breakout?"
    ]
  },
  {
    "id": "treasury-tlt-interest-rate-hedge",
    "name": "Long-Term Treasury TLT Interest Rate Hedge Analysis",
    "file": "experimental/TreasuryTLTInterestRateHedge.json",
    "output": "/experimental/TreasuryTLTInterestRateHedge.json",
    "question": "How effective has TLT been as a hedge against falling interest rates and stock market volatility?",
    "retailQuestion": "Should I buy long-term Treasury bonds when stocks get scary?",
    "description": "Analyzes the effectiveness of the iShares 20+ Year Treasury Bond ETF (TLT) as a hedge during stock market declines and periods of falling interest rates. Examines correlations, hedge ratios, and performance during major market stress events over 15 years including 2008, 2020, and rate cycle changes.",
    "apis": [
      "marketdata:/v2/stocks/bars",
      "marketdata:/v2/stocks/snapshots"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get 15+ years of TLT and SPY data for hedge analysis",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "fetch",
        "description": "Step 2: Get current TLT and SPY market data for correlation context",
        "function": "alpaca-market_stocks-snapshots"
      },
      {
        "type": "engine",
        "description": "Step 3: Calculate hedge effectiveness and correlation during stress periods",
        "function": "analyze_treasury_hedge_effectiveness"
      },
      {
        "type": "engine",
        "description": "Step 4: Backtest portfolio with TLT allocation during different rate environments",
        "function": "backtest_treasury_hedge_portfolio"
      },
      {
        "type": "compute",
        "description": "Step 5: Evaluate optimal TLT allocation for hedging purposes",
        "function": "client_compute"
      }
    ],
    "followUp": [
      "Should I hold Treasury bonds to protect against market crashes?",
      "How much of my portfolio should be in bonds?",
      "Do bonds still work as a hedge when rates are rising?",
      "Are there better hedges than long-term Treasuries?"
    ]
  },
  {
    "id": "keltner-channels-analysis",
    "name": "Keltner Channels Breakout Analysis",
    "file": "experimental/KeltnerChannelsAnalysis.json",
    "output": "/experimental/KeltnerChannelsAnalysis.json",
    "question": "Which stocks are showing Keltner Channel breakout or squeeze patterns?",
    "retailQuestion": "Which stocks are breaking out or building pressure?",
    "description": "Analyzes Keltner Channels based on exponential moving average and Average True Range to identify trending breakouts and consolidation squeezes. Examines channel width, price position, and volume confirmation for high-probability trend continuation and reversal signals.",
    "apis": [
      "marketdata:/v1beta1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/bars",
      "trading:/v2/positions"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get active stocks for Keltner Channel analysis",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch", 
        "description": "Step 2: Get historical price data for Keltner Channel calculation and pattern identification",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "fetch",
        "description": "Step 3: Check portfolio positions for Keltner Channel signal opportunities",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate Keltner Channels and identify breakout/squeeze patterns with ATR analysis",
        "function": "analyze_keltner_channels"
      },
      {
        "type": "compute",
        "description": "Step 5: Rank channel signals by breakout strength and trend continuation probability",
        "function": "client_compute"
      }
    ],
    "followUp": [
      "Should I buy these channel breakouts?",
      "How do Keltner Channels differ from Bollinger Bands?", 
      "What's the best way to trade squeeze patterns?",
      "How reliable are these breakout signals?"
    ]
  },
  {
    "id": "macd-crossover-signals",
    "name": "MACD Crossover Signal Analysis",
    "file": "experimental/MACDCrossoverSignals.json",
    "output": "/experimental/MACDCrossoverSignals.json",
    "question": "Which stocks are showing fresh MACD bullish crossover signals?",
    "retailQuestion": "Which stocks are showing fresh momentum to go higher?",
    "description": "Identifies stocks with recent MACD bullish crossovers where the MACD line crosses above the signal line, indicating potential upward momentum. Analyzes crossover strength, histogram patterns, and volume confirmation to filter high-probability momentum signals and avoid false breakouts in sideways markets.",
    "apis": [
      "marketdata:/v1beta1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/bars",
      "marketdata:/v2/stocks/snapshots"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get active stocks for MACD crossover screening",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch",
        "description": "Step 2: Get historical price data for MACD calculation and trend context",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "fetch",
        "description": "Step 3: Get current market data for real-time crossover confirmation",
        "function": "alpaca-market_stocks-snapshots"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate MACD indicators and identify fresh bullish crossovers with volume validation",
        "function": "scan_macd_crossovers"
      },
      {
        "type": "compute",
        "description": "Step 5: Rank crossover signals by momentum strength and trend alignment",
        "function": "client_compute"
      }
    ],
    "followUp": [
      "Should I buy these stocks with momentum signals?",
      "How long does this momentum usually last?",
      "What if the momentum fades quickly?",
      "Are these signals reliable for making money?"
    ]
  },
  {
    "id": "price-volume-breakouts",
    "name": "Price Volume Breakout Analysis",
    "file": "experimental/PriceVolumeBreakouts.json",
    "output": "/experimental/PriceVolumeBreakouts.json",
    "question": "Which stocks are showing coordinated price and volume breakout patterns?",
    "retailQuestion": "Which stocks are breaking out with heavy trading?",
    "description": "Identifies stocks where price breakouts are confirmed by significant volume expansion, indicating institutional participation and higher probability of sustained moves. Analyzes volume ratios, accumulation patterns, and price momentum for authentic breakout validation.",
    "apis": [
      "marketdata:/v1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/bars",
      "marketdata:/v2/stocks/snapshots"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get active stocks showing elevated volume activity",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch",
        "description": "Step 2: Get historical price and volume data for breakout pattern identification",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "fetch",
        "description": "Step 3: Get current market data for real-time volume breakout confirmation",
        "function": "alpaca-market_stocks-snapshots"
      },
      {
        "type": "engine",
        "description": "Step 4: Analyze coordinated price-volume breakouts with institutional flow validation",
        "function": "analyze_price_volume_breakouts"
      },
      {
        "type": "compute",
        "description": "Step 5: Rank breakouts by volume confirmation quality and sustainability probability",
        "function": "client_compute"
      }
    ],
    "followUp": [
      "Should I buy stocks with strong volume breakouts?",
      "How important is volume in confirming breakouts?",
      "What if volume dies down after the breakout?",
      "Are volume-backed moves more reliable?"
    ]
  },
  {
    "id": "three-black-crows-pattern",
    "name": "Three Black Crows Bearish Pattern",
    "file": "experimental/ThreeBlackCrowsPattern.json",
    "output": "/experimental/ThreeBlackCrowsPattern.json",
    "question": "Which stocks are forming three black crows bearish reversal patterns?",
    "retailQuestion": "Which stocks are showing serious weakness?",
    "description": "Identifies three black crows patterns - three consecutive long red candles with progressively lower closes, signaling strong bearish reversal. Analyzes pattern quality, volume confirmation, and trend context to validate authentic bearish reversals at resistance levels.",
    "apis": [
      "marketdata:/v1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/bars",
      "trading:/v2/positions"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get active stocks for three black crows pattern screening",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch",
        "description": "Step 2: Get recent OHLC data for bearish candlestick pattern identification",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "fetch",
        "description": "Step 3: Check portfolio positions for potential bearish reversal patterns",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "engine",
        "description": "Step 4: Identify three black crows patterns with volume analysis and trend context validation",
        "function": "detect_three_black_crows"
      },
      {
        "type": "compute",
        "description": "Step 5: Rank bearish patterns by reversal strength and continuation probability",
        "function": "client_compute"
      }
    ],
    "followUp": [
      "Should I sell stocks showing this pattern?",
      "How bearish is the three black crows signal?",
      "Is this a good time to short these stocks?",
      "What if the selling pressure continues?"
    ]
  },
  {
    "id": "adx-trend-strength",
    "name": "ADX Trend Strength Analysis",
    "file": "experimental/ADXTrendStrength.json",
    "output": "/experimental/ADXTrendStrength.json",
    "question": "Which stocks are showing strong trending behavior based on ADX readings?",
    "retailQuestion": "Which stocks are in strong uptrends or downtrends?",
    "description": "Identifies stocks with high ADX (Average Directional Index) readings above 25, indicating strong trending conditions. Analyzes directional movement indicators (+DI/-DI) and ADX slope to determine trend strength, direction, and sustainability for trend-following strategies.",
    "apis": [
      "marketdata:/v1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/bars",
      "trading:/v2/positions"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get active stocks for ADX trend strength screening",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch",
        "description": "Step 2: Get historical price data for ADX and directional indicator calculations",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "fetch",
        "description": "Step 3: Check portfolio positions for trend strength assessment",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate ADX, +DI, -DI indicators and analyze trend strength with direction confirmation",
        "function": "analyze_adx_trend_strength"
      },
      {
        "type": "compute",
        "description": "Step 5: Rank stocks by trend strength and directional clarity",
        "function": "client_compute"
      }
    ],
    "followUp": [
      "Should I buy stocks in strong uptrends?",
      "How long do these trends usually last?",
      "What if the trend suddenly reverses?",
      "Is it safe to follow the trend direction?"
    ]
  },
  {
    "id": "accumulation-distribution-line",
    "name": "Accumulation Distribution Line Analysis",
    "file": "experimental/AccumulationDistributionLine.json",
    "output": "/experimental/AccumulationDistributionLine.json",
    "question": "Which stocks are showing accumulation or distribution patterns based on A/D line analysis?",
    "retailQuestion": "Which stocks are big investors buying or selling?",
    "description": "Analyzes Accumulation/Distribution Line to identify whether stocks are under accumulation (institutional buying) or distribution (institutional selling). Examines A/D line divergences with price, trend confirmations, and volume flow patterns for smart money tracking.",
    "apis": [
      "marketdata:/v1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/bars",
      "trading:/v2/positions"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get active stocks for Accumulation/Distribution analysis",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch", 
        "description": "Step 2: Get historical price and volume data for A/D line calculation",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "fetch",
        "description": "Step 3: Check portfolio positions for accumulation/distribution assessment", 
        "function": "alpaca-trading_positions"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate A/D line and identify accumulation/distribution patterns with divergence analysis",
        "function": "analyze_accumulation_distribution"
      },
      {
        "type": "compute",
        "description": "Step 5: Rank stocks by accumulation/distribution strength and smart money flow direction",
        "function": "client_compute"
      }
    ],
    "followUp": [
      "Should I follow what the big investors are doing?",
      "How reliable are these buying/selling signals?", 
      "What happens if I go against institutional flow?",
      "Should I buy when institutions are accumulating?"
    ]
  },
  {
    "id": "position-fair-value-gaps",
    "name": "Position Fair Value Gap Analysis",
    "file": "experimental/PositionFairValueGaps.json",
    "output": "/experimental/PositionFairValueGaps.json",
    "question": "Which of my positions had the largest price gap versus fair value open?",
    "description": "Analyzes current portfolio positions to identify which holdings showed the largest gaps between actual market opening prices and calculated fair value opens, highlighting potential momentum signals or mean-reversion opportunities. Uses overnight sentiment indicators, volatility adjustments, and gap persistence analysis to provide actionable insights on position-specific price discovery inefficiencies.",
    "apis": [
      "trading:/v2/positions",
      "marketdata:/v2/stocks/snapshots",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get current account positions with quantities and market values",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "fetch",
        "description": "Step 2: Get current market snapshots for all position symbols including bid/ask and last trade data",
        "function": "alpaca-market_stocks-snapshots"
      },
      {
        "type": "fetch",
        "description": "Step 3: Get historical price data for fair value calculation (previous day close, overnight futures if available)",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate fair value gaps between actual market open and theoretical opening prices using pandas statistical analysis, overnight sentiment indicators, and volatility adjustments with multi-method approach",
        "function": "calculate_fair_value_gaps"
      },
      {
        "type": "compute",
        "description": "Step 5: Rank positions by absolute gap magnitude and categorize as premium/discount to fair value",
        "function": "client_compute"
      }
    ]
  },
  {
    "id": "bullish-engulfing-today",
    "name": "Bullish Engulfing Patterns Today",
    "file": "experimental/BullishEngulfingToday.json",
    "output": "/experimental/BullishEngulfingToday.json",
    "question": "Which symbols printed a bullish engulfing pattern today?",
    "description": "Identifies stocks displaying bullish engulfing candlestick patterns today among actively traded securities, analyzing volume confirmation, support level context, and sector concentration to highlight high-probability reversal opportunities with clear risk/reward parameters. Workflow validated through end-to-end pipeline testing.",
    "apis": [
      "marketdata:/v1beta1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get list of most active stocks using marketdata:/v1beta1/screener/stocks/most-actives with top=50 to focus on liquid, high-volume securities where candlestick patterns have higher reliability and trading opportunity.",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch",
        "description": "Step 2: Retrieve last 3 days of daily bars for active stocks using marketdata:/v2/stocks/bars with timeframe=1Day to obtain OHLC data needed for bullish engulfing pattern identification and volume analysis.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Identify bullish engulfing patterns by analyzing OHLC data where today's green candle completely engulfs yesterday's red candle body, using validated engulfing pattern detection with volume confirmation and strength scoring.",
        "function": "identify_trading_patterns"
      },
      {
        "type": "compute",
        "description": "Step 4: Calculate pattern strength metrics including body size ratios, volume confirmation levels, and support/resistance context to rank and prioritize the most reliable bullish engulfing setups for trading.",
        "function": "client_compute"
      }
    ],
    "followUp": [
      "What's the historical success rate of these patterns?",
      "Which patterns are at key technical support levels?",
      "How should I size positions for these setups?"
    ]
  },
  {
    "id": "aapl-vs-nvda-decision",
    "name": "AAPL vs NVDA Investment Decision Analysis",
    "file": "experimental/AAPLvsNVDADecision.json",
    "output": "/experimental/AAPLvsNVDADecision.json",
    "question": "Should I sell my AAPL holding and buy NVDA?",
    "description": "Comprehensive investment decision analysis comparing Apple vs NVIDIA positions, evaluating relative performance, risk metrics, technical indicators, portfolio impact, tax implications, and market timing to provide data-driven guidance for the position swap decision.",
    "apis": [
      "trading:/v2/positions",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Retrieve current portfolio positions using trading:/v2/positions to analyze existing AAPL holding size, cost basis, unrealized P&L, and portfolio allocation percentage for informed decision-making context.",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "fetch",
        "description": "Step 2: Get 6 months of daily historical bars for both AAPL and NVDA using marketdata:/v2/stocks/bars to perform comprehensive comparative analysis of performance, volatility, and trend characteristics.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Calculate daily returns for both AAPL and NVDA to establish baseline performance metrics, return distributions, and identify periods of outperformance/underperformance for comparative analysis.",
        "function": "calculate_daily_returns"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate comprehensive risk metrics including volatility, Sharpe ratios, maximum drawdowns, and VaR for both stocks to assess risk-adjusted returns and downside protection characteristics.",
        "function": "calculate_risk_metrics"
      },
      {
        "type": "engine",
        "description": "Step 5: Analyze correlation between AAPL and NVDA returns to understand diversification benefits/risks of the swap and impact on overall portfolio risk characteristics and factor exposures.",
        "function": "comprehensive_technical_analysis"
      },
      {
        "type": "engine",
        "description": "Step 6: Calculate RSI technical indicators for both stocks to assess current momentum, overbought/oversold conditions, and timing considerations for the potential position swap decision.",
        "function": "calculate_rsi"
      },
      {
        "type": "engine",
        "description": "Step 7: Calculate MACD indicators for trend analysis and momentum confirmation to evaluate technical timing signals and identify optimal entry/exit windows for the position swap strategy.",
        "function": "calculate_macd"
      }
    ],
    "followUp": [
      "What's the optimal timing for this position swap?",
      "How would this change affect my portfolio's sector allocation?",
      "Should I consider partial position swaps instead?"
    ]
  },
  {
    "id": "tesla-five-technical-strategies",
    "name": "Tesla Five Technical Strategies Comparison",
    "file": "experimental/TeslaFiveTechnicalStrategies.json",
    "output": "/experimental/TeslaFiveTechnicalStrategies.json",
    "question": "Tell me five random technical strategies performance over TSLA in last 5 years?",
    "description": "Comprehensive backtesting comparison of five different technical trading strategies applied to Tesla over 5 years: RSI mean reversion, Bollinger Band breakouts, momentum trading, gap-fill patterns, and MACD signals, analyzing which approaches work best for Tesla's volatile growth stock behavior.",
    "apis": [
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Retrieve 5 years of daily historical bars for Tesla (TSLA) using marketdata:/v2/stocks/bars with timeframe=1Day to obtain comprehensive OHLC and volume data for multiple technical indicators using ta library for comprehensive strategy backtesting.",
        "function": "comprehensive_technical_analysis"
      },
      {
        "type": "engine",
        "description": "Step 2: Calculate daily returns and price momentum indicators for Tesla, establishing baseline performance metrics and trend characteristics needed for technical indicators using ta library for comprehensive strategy signal generation and validation.",
        "function": "comprehensive_technical_analysis"
      },
      {
        "type": "engine",
        "description": "Step 3: Calculate RSI(14) oscillator for Tesla using ta library to identify overbought/oversold levels for mean reversion strategy signals, analyzing RSI values below 30 (buy) and above 70 (sell).",
        "function": "calculate_rsi"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate MACD(12,26,9) and Bollinger Bands for Tesla using ta library to generate trend-following crossover signals and identify breakout opportunities when price moves above/below bands.",
        "function": "calculate_macd"
      },
      {
        "type": "engine",
        "description": "Step 5: Implement Bollinger Band breakout strategy and analyze gap-fill patterns using technical analysis functions to identify squeeze conditions, band breakouts, and gap reversal opportunities.",
        "function": "calculate_bollinger_bands"
      },
      {
        "type": "engine",
        "description": "Step 6: Calculate comprehensive performance metrics for all five strategies including total returns, win rates, Sharpe ratios, maximum drawdowns, trade frequencies, and compare against buy-and-hold benchmark.",
        "function": "calculate_performance_metrics"
      }
    ],
    "followUp": [
      "Which strategy performs best during different market regimes?",
      "How do these strategies perform on other high-beta tech stocks?",
      "What's the optimal portfolio allocation across these five strategies?"
    ]
  },
  {
    "id": "tesla-sma-crossover-strategy",
    "name": "Tesla SMA Crossover Strategy Analysis",
    "file": "experimental/TeslaSMACrossoverStrategy.json",
    "output": "/experimental/TeslaSMACrossoverStrategy.json",
    "question": "Does SMA crossover strategy worked for Tesla over last 5 years?",
    "description": "Comprehensive backtesting analysis of Simple Moving Average (SMA) crossover strategy applied to Tesla (TSLA) over 5 years, evaluating 50/200 SMA signals for total returns, win rates, drawdowns, and risk-adjusted performance vs buy-and-hold approach.",
    "apis": [
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Retrieve 5 years of daily historical bars for Tesla (TSLA) using marketdata:/v2/stocks/bars with timeframe=1Day to obtain comprehensive OHLC data for SMA calculation and backtesting analysis.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 2: Calculate 50-day and 200-day Simple Moving Averages for Tesla's closing prices, identifying crossover points where 50-day SMA crosses above (buy signal) or below (sell signal) the 200-day SMA.",
        "function": "calculate_sma"
      },
      {
        "type": "engine",
        "description": "Step 3: Calculate daily returns and simulate strategy performance by executing trades at SMA crossover signals, tracking entry/exit prices, holding periods, and individual trade returns over the 5-year period.",
        "function": "calculate_daily_returns"
      },
      {
        "type": "engine",
        "description": "Step 4: Analyze strategy performance metrics including total return, win rate, maximum drawdown, Sharpe ratio, trade duration statistics, and compare against buy-and-hold benchmark to assess effectiveness.",
        "function": "calculate_performance_metrics"
      }
    ],
    "followUp": [
      "How does the strategy perform with different SMA periods (20/50)?",
      "What's the impact of transaction costs on strategy returns?",
      "How does Tesla SMA strategy compare to other tech stocks?"
    ]
  },
  {
    "id": "monday-performance-analysis",
    "name": "Monday Performance Analysis",
    "file": "experimental/MondayPerformanceAnalysis.json",
    "output": "/experimental/MondayPerformanceAnalysis.json",
    "question": "Which of my holdings show the best performance on Mondays vs other days?",
    "description": "Analyzes portfolio holdings to identify which stocks demonstrate significant Monday effects (positive or negative) compared to other weekdays, revealing patterns that may be attributed to weekend news flow, institutional positioning, or behavioral biases that create systematic trading opportunities.",
    "apis": [
      "trading:/v2/positions",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Retrieve current portfolio positions using trading:/v2/positions to get list of holdings for weekday performance analysis, including position sizes and symbols to prioritize analysis based on portfolio weight.",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "fetch",
        "description": "Step 2: Get 6 months of daily historical bars for each position using marketdata:/v2/stocks/bars with timeframe=1Day to capture comprehensive weekday patterns across different market regimes and seasonal effects.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Calculate daily returns for each holding and segment by weekday (Monday vs Tuesday-Friday), computing average returns, win rates, volatility patterns, and risk-adjusted metrics for each day-of-week group.",
        "function": "cluster_stocks_by_returns"
      },
      {
        "type": "engine",
        "description": "Step 4: Perform statistical significance testing using t-tests to validate Monday vs other days performance differences, calculate confidence intervals, and identify holdings with statistically significant Monday effects for tactical trading strategies.",
        "function": "calculate_statistical_significance"
      }
    ],
    "followUp": [
      "How do Monday patterns correlate with sector performance?",
      "What's the optimal position sizing for Monday effect trades?",
      "Do Monday effects persist after earnings announcements?"
    ]
  },
  {
    "id": "aapl-weekday-trading-analysis",
    "name": "AAPL Weekday Trading Analysis",
    "file": "experimental/AAPLWeekdayTradingAnalysis.json",
    "output": "/experimental/AAPLWeekdayTradingAnalysis.json",
    "question": "What's the best weekday to trade AAPL?",
    "description": "Analyzes AAPL's historical performance across different weekdays over a 6-month period to identify optimal trading days, considering daily returns, volatility patterns, volume characteristics, and statistical significance for timing entries and exits.",
    "apis": [
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Retrieve 6 months of daily historical bars for AAPL using marketdata:/v2/stocks/bars with timeframe=1Day to capture comprehensive weekday seasonal patterns across different market regimes and conditions.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 2: Calculate day-of-week performance metrics by grouping daily returns by weekday (Monday through Friday), computing average returns, win rates, volatility measures, and volume patterns for each day of the week.",
        "function": "cluster_stocks_by_returns"
      },
      {
        "type": "engine",
        "description": "Step 3: Perform statistical significance testing using t-tests and confidence intervals to validate weekday performance differences, analyze gap risk patterns, and assess consistency of seasonal effects across different time periods.",
        "function": "calculate_risk_metrics"
      }
    ],
    "followUp": [
      "How do AAPL's weekday patterns compare to other tech mega-caps?",
      "What's the best intraday time to trade AAPL on its optimal weekdays?",
      "How do earnings announcements affect AAPL's weekday seasonality?"
    ]
  },
  {
    "id": "sector-etf-friday-performance",
    "name": "Sector ETF Friday Performance Analysis",
    "file": "experimental/SectorETFFridayPerformance.json",
    "output": "/experimental/SectorETFFridayPerformance.json",
    "question": "Which sector ETFs posted the strongest Friday performance over 12 weeks?",
    "description": "Analyzes major sector ETFs to identify which sectors demonstrate the strongest Friday performance patterns over a 12-week period, revealing end-of-week institutional positioning, fund rebalancing activities, and options expiration effects that create sector-specific trading opportunities.",
    "apis": [
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Retrieve 12 weeks of daily historical bars for 11 major sector ETFs (XLK, XLF, XLE, XLV, XLI, XLP, XLU, XLRE, XLY, XLB, XLC) using marketdata:/v2/stocks/bars with timeframe=1Day to capture comprehensive sector performance data.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 2: Filter for Friday trading sessions only from the daily data, isolating end-of-week performance patterns by identifying all Friday close prices versus Friday open prices for return calculations.",
        "function": "analyze_weekday_patterns"
      },
      {
        "type": "engine",
        "description": "Step 3: Calculate comprehensive Friday statistics for each sector including: average Friday returns, success rate (percentage of positive Fridays), Friday volatility metrics, and comparison versus non-Friday performance to identify Friday-specific alpha generation.",
        "function": "calculate_risk_metrics"
      }
    ],
    "followUp": [
      "Which sectors show the weakest Friday performance for contrarian opportunities?",
      "How do Friday patterns change during options expiration weeks?",
      "What's the optimal timing for Friday sector rotation strategies?"
    ]
  },
  {
    "id": "positions-cpi-performance",
    "name": "Position CPI Release Day Performance",
    "file": "experimental/PositionsCPIPerformance.json",
    "output": "/experimental/PositionsCPIPerformance.json",
    "question": "Which of my positions showed positive returns during past CPI release days?",
    "description": "Analyzes current portfolio positions to identify which holdings demonstrated the strongest positive performance during past CPI (Consumer Price Index) release days. Examines position returns on key CPI announcement dates over the past 12 months, providing insights into which holdings serve as inflation hedges or benefit from CPI-driven market reactions for tactical allocation and risk management.",
    "apis": [
      "trading:/v2/positions",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Retrieve current portfolio positions using trading:/v2/positions to identify all held symbols, quantities, and market values for CPI performance analysis.",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "fetch",
        "description": "Step 2: For each position symbol, fetch 12 months of historical daily bars using marketdata:/v2/stocks/bars with timeframe=1Day to capture comprehensive price data covering multiple CPI release cycles.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Identify CPI release dates over the past 12 months using economic calendar data or manual date identification for the 12 monthly CPI announcements (typically mid-month releases).",
        "function": "analyze_economic_sensitivity"
      },
      {
        "type": "engine",
        "description": "Step 4: For each position and each CPI release date, calculate single-day returns using (close_price - open_price) / open_price * 100 to measure specific CPI-day performance.",
        "function": "calculate_daily_returns"
      },
      {
        "type": "engine",
        "description": "Step 5: Calculate comprehensive CPI performance statistics for each position: average CPI-day return, success rate (percentage of positive CPI days), volatility multiplier (CPI-day volatility vs normal days), and return consistency.",
        "function": "calculate_risk_metrics"
      },
      {
        "type": "engine",
        "description": "Step 6: Compare CPI-day performance to baseline daily performance for each position to identify CPI alpha generation and statistical significance of inflation data sensitivity.",
        "function": "calculate_risk_metrics"
      },
      {
        "type": "engine",
        "description": "Step 7: Analyze volume patterns on CPI days to identify institutional positioning changes and validate performance attribution to genuine CPI reactions versus random market noise.",
        "function": "analyze_economic_sensitivity"
      }
    ],
    "followUp": [
      "How do my CPI performers correlate with sector inflation sensitivity?",
      "Which positions provide the best hedge against CPI surprises?",
      "How should I adjust position sizing ahead of CPI releases?"
    ]
  },
  {
    "id": "position-rolling-skew",
    "name": "Position Rolling Skew Analysis",
    "file": "experimental/PositionRollingSkew.json",
    "output": "/experimental/PositionRollingSkew.json",
    "question": "Which of my positions have the highest rolling skew of daily returns?",
    "description": "Analyzes portfolio positions to identify which holdings demonstrate the highest rolling skewness in their daily return distributions over a 30-day window. Rolling skewness measures return asymmetry - positive skew indicates momentum-like patterns with occasional large gains, while negative skew suggests mean-reversion with frequent small gains and occasional large losses. This analysis helps assess position risk characteristics and behavioral patterns for optimal portfolio management.",
    "apis": [
      "trading:/v2/positions",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Fetch current account positions using trading:/v2/positions to identify all held symbols, quantities, and market values for skewness analysis.",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "fetch",
        "description": "Step 2: Fetch 90-day historical daily bars for each position symbol using marketdata:/v2/stocks/bars with timeframe=1Day, adjustment=all to gather comprehensive OHLC data for statistical calculations.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Calculate daily returns for each position using consecutive closing prices: daily_return = (close_t - close_t-1) / close_t-1, handling missing data and corporate actions appropriately.",
        "function": "calculate_daily_returns"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate 30-day rolling skewness for each position's daily returns using scipy.stats.skew with rolling window methodology, providing current asymmetry measurements for each holding.",
        "function": "calculate_daily_returns"
      }
    ],
    "followUp": [
      "Which positions show the most symmetric return distributions?",
      "How do skewness patterns change during different market regimes?",
      "Which holdings provide the best downside protection through negative skew?"
    ]
  },
  {
    "id": "position-200day-trend-steepness",
    "name": "Position 200-Day Trend Steepness",
    "file": "experimental/Position200DayTrendSteepness.json",
    "output": "/experimental/Position200DayTrendSteepness.json",
    "question": "Which of my positions show the steepest 200-day trend?",
    "description": "Analyzes current portfolio positions to identify which holdings demonstrate the steepest 200-day price trends using linear regression analysis on 8 months of closing price data. Measures trend slope steepness, statistical strength (R-squared), and long-term momentum sustainability to rank positions by their directional strength and trend consistency for strategic portfolio management.",
    "apis": [
      "trading:/v2/positions",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get current portfolio positions using trading:/v2/positions to retrieve all held symbols, quantities, and current market values for trend steepness analysis.",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "fetch",
        "description": "Step 2: For each position symbol, fetch 200 trading days (~280 calendar days) of historical daily bars using marketdata:/v2/stocks/bars with timeframe=1Day to gather comprehensive long-term price data for linear regression.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Apply linear regression analysis to each position's 200-day closing price series to calculate trend slope (daily price change rate), R-squared (trend strength), and statistical significance of directional patterns.",
        "function": "linear_trend_analysis"
      },
      {
        "type": "engine",
        "description": "Step 4: Convert trend slopes to geometric angles and steepness metrics, categorizing trends as steep upward (>45\u00b0), moderate upward (15\u00b0-45\u00b0), sideways (-15\u00b0 to 15\u00b0), moderate downward (-45\u00b0 to -15\u00b0), or steep downward (<-45\u00b0).",
        "function": "linear_trend_analysis"
      }
    ],
    "followUp": [
      "Which positions have the most consistent 200-day trends?",
      "How do my steepest trend positions perform during market corrections?",
      "Which positions are showing trend deterioration or reversal signals?"
    ]
  },
  {
    "id": "etf-monthly-volatility-ranking",
    "name": "ETF Monthly Volatility Ranking",
    "file": "experimental/ETFMonthlyVolatilityRanking.json",
    "output": "/experimental/ETFMonthlyVolatilityRanking.json",
    "question": "Which ETFs exhibit the highest realized volatility this month?",
    "description": "Analyzes actively traded ETFs to identify those with the highest realized volatility over the current month using daily return standard deviation calculations. Focuses on leveraged ETFs, sector-specific funds, and emerging market exposures to help investors understand current risk levels and volatility patterns across different ETF categories for enhanced risk management and tactical allocation decisions.",
    "apis": [
      "marketdata:/v1beta1/screener/stocks/most-actives",
      "trading:/v2/assets",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get list of 100 most active securities using marketdata:/v1beta1/screener/stocks/most-actives to focus on liquid, actively traded instruments with sufficient volume for reliable volatility analysis.",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch",
        "description": "Step 2: Retrieve all tradeable assets using trading:/v2/assets with asset_class=us_equity to get complete asset metadata and identify which active securities are actually ETFs versus individual stocks.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Cross-reference most active securities with asset data to filter for ETF symbols only, creating a focused list of actively traded ETFs for monthly volatility ranking analysis.",
        "function": "calculate_rolling_volatility"
      },
      {
        "type": "fetch",
        "description": "Step 4: For each identified ETF symbol, fetch current month's historical daily bars using marketdata:/v2/stocks/bars with timeframe=1Day to gather complete OHLC price data for volatility calculations.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 5: Calculate daily returns for each ETF using consecutive closing prices and compute monthly realized volatility using standard deviation of daily returns, then annualize by multiplying by sqrt(252).",
        "function": "calculate_daily_returns"
      }
    ],
    "followUp": [
      "Which ETF sectors show the most volatility clustering this month?",
      "How do leveraged ETF volatility patterns compare to their underlying sectors?",
      "What are optimal position sizing strategies for high-volatility ETFs?"
    ]
  },
  {
    "id": "first-hour-momentum-leaders",
    "name": "First Hour Momentum Leaders (3+ Sessions)",
    "file": "experimental/FirstHourMomentumLeaders.json",
    "output": "/experimental/FirstHourMomentumLeaders.json",
    "question": "Which symbols led the first hour of trading for three straight sessions?",
    "description": "Identifies stocks demonstrating consistent first-hour trading momentum (9:30-10:30 AM EST) over three or more consecutive sessions. Analyzes opening hour performance patterns to reveal stocks with sustained institutional buying interest, pre-market momentum continuation, and strong retail sentiment. First-hour leaders often indicate important market themes like sector rotation, earnings momentum, or news-driven catalysts that persist across multiple trading sessions.",
    "apis": [
      "marketdata:/v1beta1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get list of 50 most active stocks using marketdata:/v1beta1/screener/stocks/most-actives with top=50 to focus analysis on liquid, institutional-quality stocks with meaningful first-hour volume and price action for reliable momentum analysis.",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch",
        "description": "Step 2: For each active stock symbol, fetch 5 trading days of hourly historical bars using marketdata:/v2/stocks/bars with timeframe=1Hour to capture comprehensive first-hour trading patterns across recent sessions.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Isolate first-hour data by filtering for 9:30-10:30 AM EST time window from hourly bars, ensuring accurate capture of opening momentum for each trading session without pre-market or extended hours noise.",
        "function": "calculate_risk_metrics"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate first-hour returns for each stock and session using ((first_hour_close - first_hour_open) / first_hour_open) * 100, creating percentage return series for momentum analysis.",
        "function": "calculate_daily_returns"
      },
      {
        "type": "engine",
        "description": "Step 5: Identify consecutive positive first-hour sessions for each stock, tracking streaks of 3+ consecutive trading days with positive opening hour performance to establish momentum leadership patterns.",
        "function": "identify_trading_patterns"
      },
      {
        "type": "engine",
        "description": "Step 6: Calculate momentum strength metrics including: average first-hour return during streak, first-hour volume relative to daily average, volatility during opening hour, and consistency of positive performance.",
        "function": "calculate_rolling_volatility"
      },
      {
        "type": "engine",
        "description": "Step 7: Analyze sector distribution, market cap characteristics, and institutional ownership patterns of first-hour momentum leaders to identify common themes driving sustained opening strength.",
        "function": "identify_trading_patterns"
      },
      {
        "type": "engine",
        "description": "Step 8: Compute pre-market correlation analysis by examining relationship between pre-market performance (4:00 AM - 9:30 AM EST) and subsequent first-hour momentum to validate continuation patterns.",
        "function": "calculate_correlation_matrix"
      },
      {
        "type": "engine",
        "description": "Step 9: Calculate risk-adjusted momentum scores combining first-hour alpha versus market benchmark, volume confirmation ratios, and sustainability indicators based on historical performance of similar patterns.",
        "function": "cluster_stocks_by_returns"
      }
    ],
    "followUp": [
      "Which first-hour leaders have the strongest pre-market correlation?",
      "How do first-hour momentum patterns perform during different market conditions?",
      "Which sectors consistently produce the most first-hour momentum leaders?"
    ]
  },
  {
    "id": "holdings-news-sensitivity-analysis",
    "name": "Holdings News Sensitivity Analysis",
    "file": "experimental/HoldingsNewsSensitivityAnalysis.json",
    "output": "/experimental/HoldingsNewsSensitivityAnalysis.json",
    "question": "Which of my holdings are most sensitive to headline-driven volatility spikes?",
    "description": "Analyzes portfolio holdings to identify which positions are most reactive to news events and headline-driven volatility. Correlates position price movements with news volume, sentiment changes, and volatility expansion during high-news periods over the past 90 days. Provides comprehensive sensitivity scores, correlation metrics, and risk management insights to help investors understand which holdings require closer monitoring during news cycles and may benefit from adjusted position sizing during periods of elevated market uncertainty.",
    "apis": [
      "trading:/v2/positions",
      "marketdata:/v2/stocks/bars",
      "marketdata:/v1beta1/news"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get current portfolio positions using trading:/v2/positions to identify all held symbols, quantities, market values, and position weights for news sensitivity analysis.",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "fetch",
        "description": "Step 2: For each position symbol, fetch 90 days of historical daily bars using marketdata:/v2/stocks/bars with timeframe=1Day to gather comprehensive price data for volatility calculations and correlation analysis.",
        "function": "calculate_correlation_matrix"
      },
      {
        "type": "fetch",
        "description": "Step 3: Retrieve 90 days of news articles for each position using marketdata:/v1beta1/news with symbol filtering to get headline volume, sentiment, and timing data for correlation analysis.",
        "function": "calculate_correlation_matrix"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate daily returns for each holding using consecutive closing prices: daily_return = (close_today - close_yesterday) / close_yesterday, creating return series for volatility and correlation analysis.",
        "function": "calculate_correlation_matrix"
      },
      {
        "type": "engine",
        "description": "Step 5: Calculate baseline volatility metrics for each position using 30-day rolling windows of daily returns: standard deviation, average true range, and volatility percentiles for normal vs high-news periods.",
        "function": "calculate_daily_returns"
      },
      {
        "type": "engine",
        "description": "Step 6: Identify high-news days for each position by detecting days with >3 news articles or significant sentiment changes, creating binary classification for news-event vs normal trading days.",
        "function": "calculate_risk_metrics"
      },
      {
        "type": "engine",
        "description": "Step 7: Calculate news-period volatility expansion by comparing volatility during high-news days vs baseline periods: volatility_multiplier = news_day_volatility / baseline_volatility for each holding.",
        "function": "calculate_rolling_volatility"
      },
      {
        "type": "engine",
        "description": "Step 8: Compute correlation coefficients between daily price movements and news metrics including: article count, sentiment scores, and news timing (pre-market vs intraday) for each position.",
        "function": "calculate_correlation_matrix"
      },
      {
        "type": "engine",
        "description": "Step 9: Analyze VIX correlation amplification by measuring how news sensitivity increases during market stress periods (VIX >25) vs normal market conditions for risk assessment.",
        "function": "calculate_correlation_matrix"
      },
      {
        "type": "engine",
        "description": "Step 10: Calculate comprehensive news sensitivity scores (0-10 scale) combining volatility expansion (40%), news correlation (30%), sentiment impact (20%), and consistency metrics (10%) for each holding.",
        "function": "calculate_correlation_matrix"
      },
      {
        "type": "engine",
        "description": "Step 11: Perform portfolio-level analysis including sector concentration risk, correlation clustering during news events, and identification of defensive vs speculative position allocations.",
        "function": "calculate_correlation_matrix"
      }
    ],
    "followUp": [
      "How can I hedge my most news-sensitive positions?",
      "Which sectors provide the best diversification during news-driven volatility?",
      "What are optimal position sizes for my headline-sensitive holdings during earnings season?"
    ]
  },
  {
    "id": "etf-volatility-analysis",
    "name": "ETF Volatility Analysis (30-Day)",
    "file": "experimental/ETFVolatilityAnalysis.json",
    "output": "/experimental/ETFVolatilityAnalysis.json",
    "question": "Which actively traded ETFs exhibit the highest realized volatility over the past 30 days?",
    "description": "Analyzes the most actively traded ETFs to identify those with the highest 30-day realized volatility, providing comprehensive risk metrics including maximum drawdown, Value-at-Risk, and sector concentration analysis. Focuses on leveraged ETFs and volatile sectors like technology, energy, and biotech to help investors understand current market risk patterns and make informed tactical allocation decisions.",
    "apis": [
      "marketdata:/v1beta1/screener/stocks/most-actives",
      "trading:/v2/assets",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get list of 50 most active securities using marketdata:/v1beta1/screener/stocks/most-actives with top=50 to focus on liquid, actively traded instruments with sufficient volume for reliable volatility analysis.",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch",
        "description": "Step 2: Retrieve all tradeable assets using trading:/v2/assets with asset_class=us_equity to get complete asset metadata and identify which active securities are actually ETFs.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Cross-reference most active securities with asset data to filter for ETF symbols only, creating a focused list of actively traded ETFs for volatility analysis.",
        "function": "calculate_rolling_volatility"
      },
      {
        "type": "fetch",
        "description": "Step 4: For each identified ETF symbol, fetch 30 trading days (~42 calendar days) of historical daily bars using marketdata:/v2/stocks/bars with timeframe=1Day to gather complete OHLC price data for volatility calculations.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 5: Calculate daily returns for each ETF using consecutive closing prices: daily_return = (close_today - close_yesterday) / close_yesterday, creating return series for statistical analysis.",
        "function": "calculate_daily_returns"
      },
      {
        "type": "engine",
        "description": "Step 6: Compute 30-day realized volatility for each ETF using standard deviation of daily returns, then annualize by multiplying by sqrt(252) to get comparable annualized volatility metrics.",
        "function": "calculate_daily_returns"
      },
      {
        "type": "engine",
        "description": "Step 7: Calculate additional risk metrics including maximum drawdown (largest peak-to-trough decline), Value-at-Risk (95% confidence level), and volatility percentile ranking relative to historical norms.",
        "function": "calculate_rolling_volatility"
      },
      {
        "type": "engine",
        "description": "Step 8: Analyze sector and asset class distribution of high-volatility ETFs to identify concentration patterns, market themes, and underlying factor exposures driving volatility spikes.",
        "function": "calculate_rolling_volatility"
      }
    ],
    "followUp": [
      "Which ETF sectors show the most volatility clustering?",
      "How do leveraged ETF volatility patterns compare to unleveraged equivalents?",
      "What are the optimal position sizing strategies for high-volatility ETFs?"
    ]
  },
  {
    "id": "position-trend-analysis-200day",
    "name": "Position 200-Day Trend Analysis",
    "file": "experimental/PositionTrendAnalysis200Day.json",
    "output": "/experimental/PositionTrendAnalysis200Day.json",
    "question": "Which of my positions show the steepest 200-day trend?",
    "description": "Analyzes current portfolio positions to identify which holdings demonstrate the steepest 200-day price trends using linear regression analysis. Measures trend slope steepness, statistical strength (R-squared), and long-term momentum sustainability to rank positions by their directional strength over the past 8 months of trading data.",
    "apis": [
      "trading:/v2/positions",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get current portfolio positions using trading:/v2/positions to retrieve all held symbols, quantities, and current market values for trend analysis.",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "fetch",
        "description": "Step 2: For each position symbol, fetch 200 trading days (~280 calendar days) of historical daily bars using marketdata:/v2/stocks/bars with timeframe=1Day to gather comprehensive long-term price data.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Apply linear regression analysis to each position's 200-day closing price series to calculate trend slope (daily price change rate), R-squared (trend strength), and correlation coefficient.",
        "function": "calculate_correlation_matrix"
      },
      {
        "type": "engine",
        "description": "Step 4: Convert trend slopes to geometric angles and steepness metrics, categorizing trends as steep upward (>45\u00b0), moderate upward (15\u00b0-45\u00b0), sideways (-15\u00b0 to 15\u00b0), moderate downward (-45\u00b0 to -15\u00b0), or steep downward (<-45\u00b0).",
        "function": "linear_trend_analysis"
      },
      {
        "type": "engine",
        "description": "Step 5: Calculate comprehensive trend statistics including: daily slope rate, 200-day total return, trend consistency (R-squared), volatility around trend line, and momentum sustainability indicators.",
        "function": "calculate_rolling_volatility"
      },
      {
        "type": "engine",
        "description": "Step 6: Analyze portfolio-level trend distribution, identify concentration risks in similar trend directions, and assess overall long-term momentum characteristics across all positions.",
        "function": "cluster_stocks_by_returns"
      }
    ],
    "followUp": [
      "Which positions have the most consistent 200-day trends?",
      "How do my steepest trend positions perform during market corrections?",
      "Which positions are showing trend deterioration or reversal signals?"
    ]
  },
  {
    "id": "failed-breakdown-analysis",
    "name": "Failed Breakdown Analysis (60-Day)",
    "file": "experimental/FailedBreakdownAnalysis.json",
    "output": "/experimental/FailedBreakdownAnalysis.json",
    "question": "Which symbols had the most failed breakdowns in the past 60 days?",
    "description": "Identifies stocks that demonstrated the highest frequency of 'failed breakdowns' over the past 60 days, where breakdown attempts below key technical support levels (20-day or 50-day moving averages) were quickly reversed within 3-5 trading days. Failed breakdowns often indicate strong institutional support and can be bullish technical signals, providing insights into stocks with resilient price action and potential reversal opportunities during market weakness.",
    "apis": [
      "marketdata:/v1beta1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get list of 100 most active stocks using marketdata:/v1beta1/screener/stocks/most-actives to focus analysis on liquid, institutional-quality stocks with meaningful trading volumes and sufficient market participation for reliable technical indicators using ta library for comprehensive analysis.",
        "function": "comprehensive_technical_analysis"
      },
      {
        "type": "fetch",
        "description": "Step 2: For each active stock symbol, fetch 60 trading days (84 calendar days) of historical daily bars using marketdata:/v2/stocks/bars with timeframe=1Day to gather complete OHLC price data for technical indicators using ta library for comprehensive analysis.",
        "function": "comprehensive_technical_analysis"
      },
      {
        "type": "engine",
        "description": "Step 3: Calculate 20-day and 50-day simple moving averages for each stock using daily closing prices, creating dynamic support/resistance levels that will be used to identify breakdown attempts.",
        "function": "identify_trading_patterns"
      },
      {
        "type": "engine",
        "description": "Step 4: Identify breakdown events by detecting when stocks close below their 20-day moving average (primary criterion) or 50-day moving average (secondary criterion), with minimum 1% breach required to filter out minor violations.",
        "function": "identify_trading_patterns"
      },
      {
        "type": "engine",
        "description": "Step 5: For each breakdown event, track the recovery pattern over the following 5 trading days to determine if the stock successfully reclaimed the broken moving average level, classifying successful recoveries as 'failed breakdowns'.",
        "function": "identify_trading_patterns"
      },
      {
        "type": "engine",
        "description": "Step 6: Calculate comprehensive statistics for each symbol including: total breakdown attempts, failed breakdown count, recovery success rate, average recovery time, average recovery strength (percentage gain), and volume characteristics during breakdown events.",
        "function": "identify_trading_patterns"
      },
      {
        "type": "engine",
        "description": "Step 7: Analyze sector patterns, market cap correlations, and institutional ownership characteristics of stocks with the highest failed breakdown frequencies to identify common characteristics and market context.",
        "function": "calculate_correlation_matrix"
      }
    ],
    "followUp": [
      "Which failed breakdown stocks have the best risk-adjusted returns?",
      "How do failed breakdown patterns perform during different market conditions?",
      "What volume characteristics distinguish successful vs unsuccessful breakdown recoveries?"
    ]
  },
  {
    "id": "holdings-least-correlated",
    "name": "Holdings Least Correlated Analysis",
    "file": "experimental/HoldingsLeastCorrelated.json",
    "output": "/experimental/HoldingsLeastCorrelated.json",
    "question": "Which of my holdings are least correlated with each other?",
    "description": "Analyzes portfolio holdings to identify pairs with the lowest correlation coefficients over the past 90 days, providing crucial insights for portfolio diversification and risk management. Calculates pairwise correlations between all holdings using daily returns and identifies the most uncorrelated pairs that offer the best diversification benefits for reducing overall portfolio volatility.",
    "apis": [
      "trading:/v2/positions",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get current portfolio positions using trading:/v2/positions to identify all held symbols, quantities, and market values for correlation analysis.",
        "function": "calculate_correlation_matrix"
      },
      {
        "type": "fetch",
        "description": "Step 2: For each position symbol, fetch 90 days of historical daily bars using marketdata:/v2/stocks/bars with timeframe=1Day to gather sufficient price data for statistical correlation calculations.",
        "function": "calculate_correlation_matrix"
      },
      {
        "type": "engine",
        "description": "Step 3: Calculate daily percentage returns for each holding using consecutive closing prices: daily_return = (close_today - close_yesterday) / close_yesterday * 100.",
        "function": "calculate_daily_returns"
      },
      {
        "type": "engine",
        "description": "Step 4: Compute full pairwise correlation matrix between all holdings using daily returns, applying Pearson correlation coefficient methodology to measure linear relationships between each pair.",
        "function": "calculate_correlation_matrix"
      },
      {
        "type": "engine",
        "description": "Step 5: Identify and rank pairs with the lowest correlation coefficients (closest to 0 or negative values), prioritizing combinations that offer the greatest diversification benefits.",
        "function": "comprehensive_technical_analysis"
      },
      {
        "type": "engine",
        "description": "Step 6: Calculate portfolio-level diversification metrics including weighted correlation scores, sector concentration analysis, and volatility reduction estimates from low-correlation holdings.",
        "function": "calculate_correlation_matrix"
      }
    ],
    "followUp": [
      "How can I further reduce correlation in my portfolio?",
      "Which asset classes would add the most diversification?",
      "How do these correlations change during market stress periods?"
    ]
  },
  {
    "id": "highest-up-day-percentage",
    "name": "Highest Up Day Percentage (30-Day)",
    "file": "experimental/HighestUpDayPercentage.json",
    "output": "/experimental/HighestUpDayPercentage.json",
    "question": "Which tickers have the highest percentage of up days in the last month?",
    "description": "Analyzes the most actively traded stocks to identify which tickers demonstrate the highest consistency of positive daily performance over the past 30 trading days. An 'up day' is defined as any session where closing price exceeds opening price, providing insights into stocks with sustained intraday momentum and positive sentiment patterns.",
    "apis": [
      "marketdata:/v1beta1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get list of 100 most active stocks using marketdata:/v1beta1/screener/stocks/most-actives to focus analysis on liquid, institutional-grade stocks with meaningful trading patterns and sufficient volume for reliable analysis.",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch",
        "description": "Step 2: For each active stock symbol, fetch 30 trading days of historical daily bars using marketdata:/v2/stocks/bars with timeframe=1Day and start date 30 trading days ago to capture complete OHLC data.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: For each stock and each trading day, determine if it was an 'up day' by comparing closing price to opening price (up_day = close > open), creating binary daily classification for momentum analysis.",
        "function": "calculate_risk_metrics"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate up-day statistics for each stock: total up days, up-day percentage (up_days/total_days * 100), average gain on up days, average loss on down days, and consistency metrics.",
        "function": "calculate_risk_metrics"
      },
      {
        "type": "engine",
        "description": "Step 5: Analyze patterns across market cap segments, sectors, and volume characteristics to identify factors contributing to high up-day consistency and momentum sustainability.",
        "function": "identify_trading_patterns"
      }
    ],
    "followUp": [
      "Which sectors show the most consistent up-day patterns?",
      "How do up-day percentages correlate with trading volume?",
      "Which high up-day stocks have the best risk-adjusted returns?"
    ]
  },
  {
    "id": "positions-weekly-range-tightness",
    "name": "Positions with Tightest Weekly Ranges (Quarterly)",
    "file": "experimental/PositionsWeeklyRangeTightness.json",
    "output": "/experimental/PositionsWeeklyRangeTightness.json",
    "question": "Which of my positions had the tightest weekly ranges this quarter?",
    "description": "Analyzes current portfolio positions to identify stocks with the smallest weekly trading ranges over the past quarter (13 weeks). Weekly range tightness measures the average percentage difference between weekly high and low prices, revealing the most stable and least volatile holdings that trade within narrow price bands.",
    "apis": [
      "trading:/v2/positions",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get current portfolio positions using trading:/v2/positions to identify all held symbols, quantities, and current market values.",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "fetch",
        "description": "Step 2: For each position symbol, fetch 13 weeks (91 days) of historical weekly bars using marketdata:/v2/stocks/bars with timeframe=1Week and start date 91 days ago.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Calculate weekly range percentages for each position by computing ((weekly_high - weekly_low) / weekly_close) * 100 for each of the 13 weeks in the quarter.",
        "function": "calculate_risk_metrics"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate average weekly range, standard deviation of ranges, range consistency metrics, and identify weeks with tightest/widest ranges for each position.",
        "function": "calculate_risk_metrics"
      },
      {
        "type": "engine",
        "description": "Step 5: Rank all positions by average weekly range percentage (ascending order = tightest ranges first) and analyze volatility patterns and sector concentrations.",
        "function": "calculate_rolling_volatility"
      }
    ],
    "followUp": [
      "Which positions had the widest weekly ranges for comparison?",
      "How do my tightest-range positions perform during market stress?",
      "What's the correlation between weekly range tightness and dividend yield in my portfolio?"
    ]
  },
  {
    "id": "sector-etf-relative-strength",
    "name": "Sector ETF Relative Strength Analysis",
    "file": "experimental/SectorETFRelativeStrength.json",
    "output": "/experimental/SectorETFRelativeStrength.json",
    "question": "Which sector ETFs showed improving relative strength for three consecutive weeks?",
    "description": "Analyzes major sector ETFs to identify those demonstrating sustained relative strength improvement versus the S&P 500 benchmark over consecutive three-week periods. Examines sector rotation patterns, momentum sustainability, and provides insights into emerging sector leadership for tactical allocation decisions.",
    "apis": [
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Retrieve 12 weeks of daily historical bars for 11 major sector ETFs (XLK, XLF, XLE, XLV, XLI, XLP, XLU, XLRE, XLY, XLB, XLC) using marketdata:/v2/stocks/bars with timeframe=1Day.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "fetch",
        "description": "Step 2: Get corresponding 12 weeks of SPY daily bars using marketdata:/v2/stocks/bars to establish benchmark performance for relative strength calculations.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Convert daily price data to weekly returns by calculating Friday-to-Friday percentage changes for both sector ETFs and SPY benchmark.",
        "function": "analyze_weekday_patterns"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate weekly relative strength ratios for each sector ETF by dividing sector weekly return by SPY weekly return (RS_ratio = sector_return / SPY_return).",
        "function": "calculate_risk_metrics"
      },
      {
        "type": "engine",
        "description": "Step 5: Identify consecutive weeks of relative strength improvement by detecting 3+ week periods where RS ratios consistently increase week-over-week.",
        "function": "calculate_risk_metrics"
      },
      {
        "type": "engine",
        "description": "Step 6: Analyze improvement sustainability by calculating average weekly RS gains, momentum consistency scores, and volume confirmation metrics for each improving sector.",
        "function": "calculate_risk_metrics"
      }
    ],
    "followUp": [
      "Which individual stocks are driving sector relative strength?",
      "How do current sector rotations compare to historical patterns?",
      "What economic factors are influencing sector performance divergence?"
    ]
  },
  {
    "id": "gap-down-recovery-analysis",
    "name": "Gap-Down Recovery Analysis",
    "file": "experimental/GapDownRecoveryAnalysis.json",
    "output": "/experimental/GapDownRecoveryAnalysis.json",
    "question": "Which of my holdings most often gap down but finish green?",
    "description": "Analyzes portfolio holdings to identify which stocks most frequently gap down at market open but recover to close higher than the opening price. Examines gap-down events and recovery success rates to rank holdings by their resilience patterns and ability to bounce back from overnight weakness.",
    "apis": [
      "trading:/v2/positions",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get current portfolio positions using trading:/v2/positions to identify all held symbols and their quantities.",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "fetch",
        "description": "Step 2: For each holding, fetch 6 months of daily historical bars using marketdata:/v2/stocks/bars with timeframe=1Day to analyze gap patterns.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Identify gap-down events by comparing each day's opening price to the previous day's closing price (gap threshold >2%).",
        "function": "identify_trading_patterns"
      },
      {
        "type": "engine",
        "description": "Step 4: For each gap-down session, determine if the stock 'finished green' by comparing closing price to opening price (close > open).",
        "function": "identify_trading_patterns"
      },
      {
        "type": "engine",
        "description": "Step 5: Calculate recovery statistics per holding: gap-down frequency, recovery success rate, average gap magnitude, and average recovery percentage.",
        "function": "identify_trading_patterns"
      },
      {
        "type": "engine",
        "description": "Step 6: Analyze portfolio-wide gap-down resilience patterns and identify which holdings demonstrate strongest institutional support during weakness.",
        "function": "identify_trading_patterns"
      }
    ],
    "followUp": [
      "What causes the gap-down events in my top resilient holdings?",
      "How do my holdings' recovery rates compare to sector averages?",
      "Which holdings show deteriorating gap-down recovery patterns?"
    ]
  },
  {
    "id": "watchlist-momentum-ranking",
    "name": "Watchlist Momentum Ranking (6-Month)",
    "file": "experimental/WatchlistMomentumRanking.json",
    "output": "/experimental/WatchlistMomentumRanking.json",
    "question": "Which watchlist symbols have the strongest 6-month price momentum?",
    "description": "Analyzes all symbols in user watchlists to identify those with the strongest 6-month price momentum, combining total returns with risk-adjusted metrics, trend consistency, and technical analysis. Ranks symbols by composite momentum scores that evaluate both raw performance and sustainability characteristics.",
    "apis": [
      "trading:/v2/watchlists",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Retrieve all user watchlists using trading:/v2/watchlists to get complete symbol lists from all watchlists.",
        "function": "alpaca-trading_watchlists"
      },
      {
        "type": "fetch",
        "description": "Step 2: For each watchlist symbol, fetch 6 months of daily price bars using marketdata:/v2/stocks/bars with timeframe=1Day and start date 6 months ago.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Calculate 6-month total returns for each symbol using first and last closing prices from the historical data.",
        "function": "calculate_daily_returns"
      },
      {
        "type": "engine",
        "description": "Step 4: Compute daily returns and annualized volatility for each symbol to assess risk characteristics and calculate risk-adjusted momentum metrics.",
        "function": "calculate_daily_returns"
      },
      {
        "type": "engine",
        "description": "Step 5: Analyze trend consistency by calculating percentage of trading days above 20-day moving average and identifying higher-high/higher-low patterns.",
        "function": "linear_trend_analysis"
      },
      {
        "type": "engine",
        "description": "Step 6: Calculate composite momentum scores combining total return (35%), risk-adjusted return (25%), trend persistence (25%), and volatility penalty (15%).",
        "function": "comprehensive_technical_analysis"
      }
    ],
    "followUp": [
      "Which momentum stocks have the best risk profiles?",
      "How does my watchlist momentum compare to market benchmarks?",
      "Which symbols are showing momentum deterioration?"
    ]
  },
  {
    "id": "holdings-downside-correlation",
    "name": "Holdings Downside Correlation with SPY",
    "file": "experimental/HoldingsDownsideCorrelation.json",
    "output": "/experimental/HoldingsDownsideCorrelation.json",
    "question": "Which of my holdings has the highest downside correlation with SPY?",
    "description": "Analyzes portfolio holdings' correlation with SPY specifically during market down days over the past 90 days, identifying which positions provide the least diversification benefit during stress periods.",
    "apis": [
      "trading:/v2/positions",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get current positions using trading:/v2/positions to identify all portfolio holdings with symbols and quantities.",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "fetch",
        "description": "Step 2: Fetch 90 days of historical daily bars for SPY using marketdata:/v2/stocks/bars with timeframe=1Day to establish benchmark performance.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "fetch",
        "description": "Step 3: For each portfolio holding, retrieve 90 days of daily bars using marketdata:/v2/stocks/bars to get price history for correlation analysis.",
        "function": "calculate_correlation_matrix"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate daily returns for SPY and all holdings, then identify specific days when SPY had negative returns (down days).",
        "function": "calculate_daily_returns"
      },
      {
        "type": "engine",
        "description": "Step 5: For each holding, calculate correlation coefficient between holding returns and SPY returns using only the subset of SPY down days.",
        "function": "calculate_correlation_matrix"
      },
      {
        "type": "engine",
        "description": "Step 6: Calculate portfolio-weighted downside correlation and identify concentration risks in highly correlated positions.",
        "function": "calculate_correlation_matrix"
      }
    ],
    "followUp": [
      "How can I reduce my portfolio's downside correlation?",
      "Which asset classes provide better downside protection?",
      "What's my portfolio's beta during market stress?"
    ]
  },
  {
    "id": "closing-volume-spikes",
    "name": "Largest Closing Volume Spikes Today",
    "file": "experimental/ClosingVolumeSpikes.json",
    "output": "/experimental/ClosingVolumeSpikes.json",
    "question": "Which symbols had the largest volume spike at the close today?",
    "description": "Identifies stocks with the most unusual closing hour volume activity compared to their 20-day historical averages, highlighting potential institutional positioning or news-driven activity.",
    "apis": [
      "marketdata:/v1beta1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/snapshots",
      "marketdata:/v2/stocks/auctions",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get list of 50 most active stocks using /v1beta1/screener/stocks/most-actives to focus analysis on liquid, institutional-grade stocks with meaningful volume patterns.",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch",
        "description": "Step 2: Retrieve today's market snapshots using /v2/stocks/snapshots to get current day's total volume and trading metrics for all active stocks.",
        "function": "alpaca-market_stocks-snapshots"
      },
      {
        "type": "fetch",
        "description": "Step 3: Get today's closing auction data using /v2/stocks/auctions to isolate specific closing hour volume activity and auction participation rates.",
        "function": "alpaca-market_stocks-auctions"
      },
      {
        "type": "fetch",
        "description": "Step 4: Fetch 20-day historical daily bars using /v2/stocks/bars with timeframe=1Day to establish baseline average closing volumes for comparison.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 5: Calculate 20-day average closing volume for each symbol, today's closing volume percentage vs historical average, and statistical significance of volume spikes.",
        "function": "calculate_risk_metrics"
      }
    ],
    "followUp": [
      "What caused the largest volume spikes?",
      "Which sectors saw the most closing activity?",
      "How do these spikes compare to options expiration patterns?"
    ]
  },
  {
    "id": "downside-gap-fills",
    "name": "Largest Downside Gap Fills Today",
    "file": "experimental/DownsideGapFills.json",
    "output": "/experimental/DownsideGapFills.json",
    "question": "Which symbols had the largest downside gap fills today?",
    "description": "Identifies stocks that experienced the largest downside gaps at market open but subsequently filled those gaps during the trading session, indicating strong buying interest and potential support levels.",
    "apis": [
      "marketdata:/v1beta1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/snapshots",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get list of 50 most active stocks using marketdata:/v1beta1/screener/stocks/most-actives to focus analysis on liquid, tradeable names.",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch",
        "description": "Step 2: Retrieve current market snapshots for all active stocks using marketdata:/v2/stocks/snapshots to get today's OHLC data.",
        "function": "alpaca-market_stocks-snapshots"
      },
      {
        "type": "fetch",
        "description": "Step 3: Get previous trading day's closing prices using marketdata:/v2/stocks/bars with timeframe=1Day for yesterday's date.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 4: Calculate gap sizes by comparing today's opening price to previous day's closing price: gap_percent = (prev_close - today_open) / prev_close * 100.",
        "function": "identify_trading_patterns"
      },
      {
        "type": "engine",
        "description": "Step 5: Identify downside gaps (negative gaps where today_open < prev_close) and check if gap was filled (today_high >= prev_close).",
        "function": "identify_trading_patterns"
      }
    ]
  },
  {
    "id": "position-rebound-after-3-down-days",
    "name": "Position Rebound After 3 Down Days",
    "file": "experimental/PositionReboundAfter3DownDays.json",
    "output": "/experimental/PositionReboundAfter3DownDays.json",
    "question": "Which of my positions tend to rebound after 3 down days in a row?",
    "description": "Analyzes current positions to identify which stocks historically show the strongest rebound performance after experiencing 3 consecutive down days, based on 90 days of historical data.",
    "apis": [
      "trading:/v2/positions",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get current positions using trading:/v2/positions to identify all held symbols and quantities.",
        "function": "alpaca-trading_positions"
      },
      {
        "type": "fetch",
        "description": "Step 2: For each position symbol, fetch 90 days of historical daily bars using marketdata:/v2/stocks/bars with timeframe=1Day.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "engine",
        "description": "Step 3: Identify all 3-consecutive-down-day sequences for each symbol over the 90-day period (minimum 0.5% daily decline threshold).",
        "function": "calculate_risk_metrics"
      },
      {
        "type": "engine",
        "description": "Step 4: For each 3-down-day occurrence, calculate the 5-day forward return to measure rebound strength.",
        "function": "calculate_risk_metrics"
      },
      {
        "type": "engine",
        "description": "Step 5: Calculate rebound statistics per symbol: average 5-day return, success rate, frequency of patterns, and maximum drawdown during rebounds.",
        "function": "calculate_risk_metrics"
      }
    ]
  },
  {
    "id": "etf-outperformance-analysis",
    "name": "ETF Outperformance vs SPY & QQQ",
    "file": "experimental/ETFOutperformanceAnalysis.json",
    "output": "/experimental/ETFOutperformanceAnalysis.json",
    "question": "Which ETFs outperformed both SPY and QQQ over the last 30 days?",
    "description": "Identifies ETFs that delivered superior returns compared to both SPY (S&P 500) and QQQ (Nasdaq 100) benchmarks over the past 30 days.",
    "apis": [
      "marketdata:/v1beta1/screener/stocks/most-actives",
      "marketdata:/v2/stocks/bars"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Get list of most active ETFs using screener API with asset_class=us_equity filter.",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "fetch",
        "description": "Step 2: Retrieve 30-day historical bars for SPY using marketdata:/v2/stocks/bars with timeframe=1Day and start date 30 days ago.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "fetch",
        "description": "Step 3: Retrieve 30-day historical bars for QQQ using marketdata:/v2/stocks/bars with timeframe=1Day and start date 30 days ago.",
        "function": "alpaca-market_stocks-bars"
      },
      {
        "type": "fetch",
        "description": "Step 4: Batch retrieve 30-day historical bars for each ETF from screener results using marketdata:/v2/stocks/bars.",
        "function": "alpaca-market_screener-most-actives"
      },
      {
        "type": "engine",
        "description": "Step 5: Calculate 30-day total returns for all ETFs, SPY, and QQQ using first and last closing prices.",
        "function": "calculate_daily_returns"
      }
    ]
  },
  {
    "id": "acct-trading-blocked",
    "name": "Account: trading blocked?",
    "file": "experimental/acct-trading-blocked.json",
    "output": "/experimental/acct-trading-blocked.json",
    "question": "Is my account currently blocked from trading?",
    "description": "Checks your Alpaca account snapshot to see if trading is currently blocked (account_blocked).",
    "apis": [
      "trading:/v2/account"
    ],
    "workflow": [
      {
        "type": "fetch",
        "description": "Step 1: Retrieve account snapshot via trading:/v2/account.",
        "function": "alpaca-trading_account"
      }
    ]
  }
]