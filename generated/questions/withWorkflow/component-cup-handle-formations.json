{
  "id": "cup-handle-formations",
  "name": "Cup and Handle Formation Scanner",
  "file": "experimental/CupHandleFormations.json",
  "output": "/experimental/CupHandleFormations.json",
  "question": "Which stocks are completing cup and handle breakout patterns?",
  "retailQuestion": "Which stocks are ready to break out to new highs?",
  "description": "Scans for cup and handle formations, a bullish continuation pattern characterized by a rounded bottom (cup) followed by a small consolidation (handle) before breakout. Analyzes cup depth, handle duration, volume patterns, and breakout quality to identify high-probability continuation setups.",
  "apis": [
    "marketdata:/v1/screener/stocks/most-actives",
    "marketdata:/v2/stocks/bars",
    "marketdata:/v2/stocks/snapshots"
  ],
  "workflow": [
    {
      "type": "fetch",
      "description": "Step 1: Get active stocks for cup and handle pattern identification",
      "function": "alpaca-market_screener-most-actives"
    },
    {
      "type": "fetch",
      "description": "Step 2: Get extended historical price data for cup and handle pattern construction",
      "function": "alpaca-market_stocks-bars"
    },
    {
      "type": "fetch",
      "description": "Step 3: Get current market data for breakout confirmation and entry timing",
      "function": "alpaca-market_stocks-snapshots"
    },
    {
      "type": "engine",
      "description": "Step 4: Identify cup and handle formations with volume analysis and breakout validation",
      "function": "detect_cup_handle_patterns"
    },
    {
      "type": "compute",
      "description": "Step 5: Rank formations by pattern quality and breakout probability",
      "function": "client_compute"
    }
  ],
  "followUp": [
    "Should I buy these stocks before they break out?",
    "How often do these patterns actually work?",
    "What happens if the breakout fails?",
    "Is it better to wait for confirmation or buy early?"
  ]
}